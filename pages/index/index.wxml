<!--pages/index/index.wxml-->
<view class="container">
  <!-- æ¬¢è¿åŒºåŸŸ -->
  <view class="welcome-section">
    <view class="welcome-info">
      <text class="welcome-text">æ¬¢è¿å›æ¥ï¼Œ</text>
      <text class="user-name">{{userInfo.name || 'ç”¨æˆ·'}}</text>
    </view>
    <text class="date-text">{{currentDate}}</text>
  </view>

  <!-- ç»Ÿè®¡å¡ç‰‡ -->
  <view class="stats-grid">
    <view class="stats-card" bindtap="navigateToDelivery" data-status="pending">
      <view class="stats-icon pending-icon">ğŸšš</view>
      <view class="stats-content">
        <text class="stats-number">{{stats.pendingDeliveries || 0}}</text>
        <text class="stats-label">å¾…é…é€</text>
      </view>
    </view>

    <view class="stats-card" bindtap="navigateToDelivery" data-status="in_progress">
      <view class="stats-icon in-progress-icon">ğŸ“¦</view>
      <view class="stats-content">
        <text class="stats-number">{{stats.inProgressDeliveries || 0}}</text>
        <text class="stats-label">é…é€ä¸­</text>
      </view>
    </view>

    <view class="stats-card" bindtap="navigateToProducts">
      <view class="stats-icon product-icon">ğŸ“‹</view>
      <view class="stats-content">
        <text class="stats-number">{{stats.totalProducts || 0}}</text>
        <text class="stats-label">å•†å“æ€»æ•°</text>
      </view>
    </view>

    <view class="stats-card" bindtap="navigateToStatistics">
      <view class="stats-icon revenue-icon">ğŸ’°</view>
      <view class="stats-content">
        <text class="stats-number">Â¥{{stats.monthlyRevenue || 0}}</text>
        <text class="stats-label">æœ¬æœˆè¥æ”¶</text>
      </view>
    </view>
  </view>

  <!-- å¿«æ·æ“ä½œ -->
  <view class="quick-actions">
    <text class="section-title">å¿«æ·æ“ä½œ</text>
    <view class="action-grid">
      <view class="action-item" bindtap="navigateToCreateDelivery">
        <view class="action-icon">â•</view>
        <text class="action-text">æ–°å»ºé€è´§å•</text>
      </view>
      <view class="action-item" bindtap="navigateToProducts">
        <view class="action-icon">ğŸ“¦</view>
        <text class="action-text">å•†å“ç®¡ç†</text>
      </view>
      <view class="action-item" bindtap="navigateToCustomers">
        <view class="action-icon">ğŸ‘¥</view>
        <text class="action-text">å®¢æˆ·ç®¡ç†</text>
      </view>
      <view class="action-item" bindtap="navigateToEmployees">
        <view class="action-icon">ğŸ‘¨â€ğŸ’¼</view>
        <text class="action-text">å‘˜å·¥ç®¡ç†</text>
      </view>
    </view>
  </view>

  <!-- æœ€è¿‘é€è´§å• -->
  <view class="recent-deliveries">
    <view class="section-header">
      <text class="section-title">æœ€è¿‘é€è´§å•</text>
      <text class="view-all" bindtap="navigateToDelivery">æŸ¥çœ‹å…¨éƒ¨</text>
    </view>
    
    <view class="delivery-list" wx:if="{{recentDeliveries.length > 0}}">
      <view 
        class="delivery-item" 
        wx:for="{{recentDeliveries}}" 
        wx:key="id"
        bindtap="navigateToDeliveryDetail"
        data-id="{{item.id}}"
      >
        <view class="delivery-info">
          <text class="delivery-number">é€è´§å•å·ï¼š{{item.deliveryNumber}}</text>
          <text class="delivery-employee">é…é€å‘˜ï¼š{{item.employeeName}}</text>
        </view>
        <view class="delivery-status">
          <text class="tag tag-{{item.status}}">{{deliveryStatusText[item.status]}}</text>
          <text class="delivery-amount">Â¥{{item.totalAmount}}</text>
        </view>
      </view>
    </view>

    <view class="empty" wx:else>
      <text class="empty-text">æš‚æ— æœ€è¿‘é€è´§å•</text>
    </view>
  </view>
</view> 